"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Chalk = require("chalk");
const express = require("express");
const fs = require("fs");
const path = require("path");
const spdy = require("spdy");
const middleware_1 = require("./middleware");
const Constants_1 = require("./Constants");
var ParseDashboard = require("parse-dashboard");
var ParseServer = require("parse-server").ParseServer;
const app = express();
// Hide this, could be security risk
app.disable("x-powered-by");
//Apply CORS
app.use(function (req, res, next) {
    res.header("Access-Control-Allow-Origin", "*");
    res.header("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept");
    next();
});
// Serve static files
const statics = path.resolve("./build/public");
app.use(express.static(statics));
var allowInsecureHTTP = true;
var dashboard = new ParseDashboard({
    apps: [
        {
            serverURL: Constants_1.CONSTANTS.SERVER_URL,
            appId: Constants_1.CONSTANTS.APP_ID,
            masterKey: Constants_1.CONSTANTS.MASTER_KEY,
            appName: Constants_1.CONSTANTS.APP_NAME
        }
    ]
}, allowInsecureHTTP);
var api = new ParseServer({
    databaseURI: Constants_1.CONSTANTS.DATABASE_URI,
    cloud: "src/server/cloud/main.js",
    appId: Constants_1.CONSTANTS.APP_ID,
    masterKey: Constants_1.CONSTANTS.MASTER_KEY,
    fileKey: "optionalFileKey",
    serverURL: Constants_1.CONSTANTS.SERVER_URL,
    filesAdapter: {
        "module": "parse-server-fs-adapter",
        "options": {
            "filesSubDirectory": Constants_1.CONSTANTS.UPLOAD_FOLDER // optional
        }
    }
});
// Serve the Parse API on the /parse URL prefix
app.use("/parse", api);
// make the Parse Dashboard available at /dashboard
app.use("/dashboard", dashboard);
//load api pages
// enableVideoApi(app);
// Handle requests to pages
app.get("*", middleware_1.appMiddleware);
const options = {
    spdy: {
        plain: true,
        protocols: ["h2", "spdy/3.1", "spdy/3", "http/1.1"]
    }
};
const tlsDir = process.env.TLSDIR || "/tls";
const key = process.env.TLSKEY || "current.key";
const chain = process.env.TLSCHAIN || "current.chain";
if (fs.existsSync(path.join(tlsDir, key))) {
    options.key = fs.readFileSync(path.join(tlsDir, key));
    options.spdy.plain = false;
    if (process.env.NODE_ENV === "production") {
        // CONSTANTS.PORT = 443;
        express()
            .get("*", (req, res, next) => {
            if (req.secure) {
                next();
            }
            // tslint:disable-next-line:no-console
            console.log(Chalk.black.bgCyan(`\n\n🐙  Redirecting to https://${req.hostname}`));
            res.redirect(`https://${req.hostname}`);
        })
            .listen(80);
    }
}
if (fs.existsSync(path.join(tlsDir, chain))) {
    options.cert = fs.readFileSync(path.join(tlsDir, chain));
}
// Start server
spdy.createServer(options, app).listen(Constants_1.PORT, (err) => {
    if (err) {
        console.error(Chalk.bgRed(err));
    }
    else {
        // tslint:disable-next-line:no-console
        console.log(Chalk.black.bgGreen(`\n\n🐙  Listening at http${!options.spdy.plain ? "s" : ""}://:${Constants_1.PORT}\n`));
    }
});
process.on("SIGINT", () => {
    console.info("Captured SIGINT! Exiting.");
    process.exit();
});
process.on("SIGTERM", () => {
    console.info("Captured SIGTERM. Exiting.");
    process.exit();
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLCtCQUErQjtBQUMvQixtQ0FBbUM7QUFDbkMseUJBQXlCO0FBQ3pCLDZCQUE2QjtBQUM3Qiw2QkFBNkI7QUFDN0IsNkNBQTZDO0FBRTdDLDJDQUE4QztBQUM5QyxJQUFJLGNBQWMsR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUNoRCxJQUFJLFdBQVcsR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsV0FBVyxDQUFDO0FBRXRELE1BQU0sR0FBRyxHQUFHLE9BQU8sRUFBRSxDQUFDO0FBRXRCLG9DQUFvQztBQUNwQyxHQUFHLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBRTVCLFlBQVk7QUFDWixHQUFHLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxFQUFFLEdBQUcsRUFBRSxJQUFJO0lBQzlCLEdBQUcsQ0FBQyxNQUFNLENBQUMsNkJBQTZCLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDL0MsR0FBRyxDQUFDLE1BQU0sQ0FBQyw4QkFBOEIsRUFBRSxnREFBZ0QsQ0FBQyxDQUFDO0lBQzdGLElBQUksRUFBRSxDQUFDO0FBQ1QsQ0FBQyxDQUFDLENBQUM7QUFFSCxxQkFBcUI7QUFDckIsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQy9DLEdBQUcsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBRWpDLElBQUksaUJBQWlCLEdBQUcsSUFBSSxDQUFDO0FBRTdCLElBQUksU0FBUyxHQUFHLElBQUksY0FBYyxDQUNoQztJQUNFLElBQUksRUFBRTtRQUNKO1lBQ0UsU0FBUyxFQUFFLHFCQUFTLENBQUMsVUFBVTtZQUMvQixLQUFLLEVBQUUscUJBQVMsQ0FBQyxNQUFNO1lBQ3ZCLFNBQVMsRUFBRSxx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LEdBQUcsRUFBRSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQzNELENBQUM7QUFFRCxlQUFlO0FBQ2YsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsR0FBVSxDQUFDLENBQUMsTUFBTSxDQUFDLGdCQUFJLEVBQUUsQ0FBQyxHQUFRLEVBQUUsRUFBRTtJQUMvRCxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ1IsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDbEMsQ0FBQztJQUFDLElBQUksQ0FBQyxDQUFDO1FBQ04sc0NBQXNDO1FBQ3RDLE9BQU8sQ0FBQyxHQUFHLENBQ1QsS0FBSyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQ2pCLDRCQUE0QixDQUFDLE9BQU8sQ0FBQyxJQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxnQkFBSSxJQUFJLENBQzNFLENBQ0YsQ0FBQztJQUNKLENBQUM7QUFDSCxDQUFDLENBQUMsQ0FBQztBQUVILE9BQU8sQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRTtJQUN4QixPQUFPLENBQUMsSUFBSSxDQUFDLDJCQUEyQixDQUFDLENBQUM7SUFDMUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2pCLENBQUMsQ0FBQyxDQUFDO0FBRUgsT0FBTyxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsR0FBRyxFQUFFO0lBQ3pCLE9BQU8sQ0FBQyxJQUFJLENBQUMsNEJBQTRCLENBQUMsQ0FBQztJQUMzQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDakIsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDaGFsayBmcm9tIFwiY2hhbGtcIjtcbmltcG9ydCAqIGFzIGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCAqIGFzIGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0ICogYXMgc3BkeSBmcm9tIFwic3BkeVwiO1xuaW1wb3J0IHsgYXBwTWlkZGxld2FyZSB9IGZyb20gXCIuL21pZGRsZXdhcmVcIjtcbmltcG9ydCB7IGVuYWJsZVZpZGVvQXBpIH0gZnJvbSBcIi4vdmlkZW9BcGlcIjtcbmltcG9ydCB7IENPTlNUQU5UUywgUE9SVCB9IGZyb20gXCIuL0NvbnN0YW50c1wiO1xudmFyIFBhcnNlRGFzaGJvYXJkID0gcmVxdWlyZShcInBhcnNlLWRhc2hib2FyZFwiKTtcbnZhciBQYXJzZVNlcnZlciA9IHJlcXVpcmUoXCJwYXJzZS1zZXJ2ZXJcIikuUGFyc2VTZXJ2ZXI7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuLy8gSGlkZSB0aGlzLCBjb3VsZCBiZSBzZWN1cml0eSByaXNrXG5hcHAuZGlzYWJsZShcIngtcG93ZXJlZC1ieVwiKTtcblxuLy9BcHBseSBDT1JTXG5hcHAudXNlKGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xuICByZXMuaGVhZGVyKFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luXCIsIFwiKlwiKTtcbiAgcmVzLmhlYWRlcihcIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnNcIiwgXCJPcmlnaW4sIFgtUmVxdWVzdGVkLVdpdGgsIENvbnRlbnQtVHlwZSwgQWNjZXB0XCIpO1xuICBuZXh0KCk7XG59KTtcblxuLy8gU2VydmUgc3RhdGljIGZpbGVzXG5jb25zdCBzdGF0aWNzID0gcGF0aC5yZXNvbHZlKFwiLi9idWlsZC9wdWJsaWNcIik7XG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKHN0YXRpY3MpKTtcblxudmFyIGFsbG93SW5zZWN1cmVIVFRQID0gdHJ1ZTtcblxudmFyIGRhc2hib2FyZCA9IG5ldyBQYXJzZURhc2hib2FyZChcbiAge1xuICAgIGFwcHM6IFtcbiAgICAgIHtcbiAgICAgICAgc2VydmVyVVJMOiBDT05TVEFOVFMuU0VSVkVSX1VSTCxcbiAgICAgICAgYXBwSWQ6IENPTlNUQU5UUy5BUFBfSUQsXG4gICAgICAgIG1hc3RlcktleTogQ09OU1RBTlRTLk1BU1RFUl9LRVksXG4gICAgICAgIGFwcE5hbWU6IENPTlNUQU5UUy5BUFBfTkFNRVxuICAgICAgfVxuICAgIF1cbiAgfSxcbiAgYWxsb3dJbnNlY3VyZUhUVFBcbik7XG5cbnZhciBhcGkgPSBuZXcgUGFyc2VTZXJ2ZXIoe1xuICBkYXRhYmFzZVVSSTogQ09OU1RBTlRTLkRBVEFCQVNFX1VSSSwgLy8gQ29ubmVjdGlvbiBzdHJpbmcgZm9yIHlvdXIgTW9uZ29EQiBkYXRhYmFzZVxuICBjbG91ZDogXCJzcmMvc2VydmVyL2Nsb3VkL21haW4uanNcIiwgLy8gQWJzb2x1dGUgcGF0aCB0byB5b3VyIENsb3VkIENvZGVcbiAgYXBwSWQ6IENPTlNUQU5UUy5BUFBfSUQsXG4gIG1hc3RlcktleTogQ09OU1RBTlRTLk1BU1RFUl9LRVksIC8vIEtlZXAgdGhpcyBrZXkgc2VjcmV0IVxuICBmaWxlS2V5OiBcIm9wdGlvbmFsRmlsZUtleVwiLFxuICBzZXJ2ZXJVUkw6IENPTlNUQU5UUy5TRVJWRVJfVVJMLCAvLyBEb24ndCBmb3JnZXQgdG8gY2hhbmdlIHRvIGh0dHBzIGlmIG5lZWRlZCxcbiAgZmlsZXNBZGFwdGVyOiB7XG4gICAgXCJtb2R1bGVcIjogXCJwYXJzZS1zZXJ2ZXItZnMtYWRhcHRlclwiLFxuICAgIFwib3B0aW9uc1wiOiB7XG4gICAgICBcImZpbGVzU3ViRGlyZWN0b3J5XCI6IENPTlNUQU5UUy5VUExPQURfRk9MREVSIC8vIG9wdGlvbmFsXG4gICAgfVxuICB9XG59KTtcblxuLy8gU2VydmUgdGhlIFBhcnNlIEFQSSBvbiB0aGUgL3BhcnNlIFVSTCBwcmVmaXhcbmFwcC51c2UoXCIvcGFyc2VcIiwgYXBpKTtcblxuLy8gbWFrZSB0aGUgUGFyc2UgRGFzaGJvYXJkIGF2YWlsYWJsZSBhdCAvZGFzaGJvYXJkXG5hcHAudXNlKFwiL2Rhc2hib2FyZFwiLCBkYXNoYm9hcmQpO1xuXG4vL2xvYWQgYXBpIHBhZ2VzXG4vLyBlbmFibGVWaWRlb0FwaShhcHApO1xuXG4vLyBIYW5kbGUgcmVxdWVzdHMgdG8gcGFnZXNcbmFwcC5nZXQoXCIqXCIsIGFwcE1pZGRsZXdhcmUpO1xuXG5cblxuY29uc3Qgb3B0aW9uczogc3BkeS5TZXJ2ZXJPcHRpb25zID0ge1xuICBzcGR5OiB7XG4gICAgcGxhaW46IHRydWUsXG4gICAgcHJvdG9jb2xzOiBbXCJoMlwiLCBcInNwZHkvMy4xXCIsIFwic3BkeS8zXCIsIFwiaHR0cC8xLjFcIl1cbiAgfVxufTtcblxuY29uc3QgdGxzRGlyID0gcHJvY2Vzcy5lbnYuVExTRElSIHx8IFwiL3Rsc1wiO1xuY29uc3Qga2V5ID0gcHJvY2Vzcy5lbnYuVExTS0VZIHx8IFwiY3VycmVudC5rZXlcIjtcbmNvbnN0IGNoYWluID0gcHJvY2Vzcy5lbnYuVExTQ0hBSU4gfHwgXCJjdXJyZW50LmNoYWluXCI7XG5cbmlmIChmcy5leGlzdHNTeW5jKHBhdGguam9pbih0bHNEaXIsIGtleSkpKSB7XG4gIG9wdGlvbnMua2V5ID0gZnMucmVhZEZpbGVTeW5jKHBhdGguam9pbih0bHNEaXIsIGtleSkpO1xuICBvcHRpb25zLnNwZHkhLnBsYWluID0gZmFsc2U7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAvLyBDT05TVEFOVFMuUE9SVCA9IDQ0MztcbiAgICBleHByZXNzKClcbiAgICAgIC5nZXQoXCIqXCIsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICBpZiAocmVxLnNlY3VyZSkge1xuICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuICAgICAgICBjb25zb2xlLmxvZyhDaGFsay5ibGFjay5iZ0N5YW4oYFxcblxcbu2gve2wmSAgUmVkaXJlY3RpbmcgdG8gaHR0cHM6Ly8ke3JlcS5ob3N0bmFtZX1gKSk7XG4gICAgICAgIHJlcy5yZWRpcmVjdChgaHR0cHM6Ly8ke3JlcS5ob3N0bmFtZX1gKTtcbiAgICAgIH0pXG4gICAgICAubGlzdGVuKDgwKTtcbiAgfVxufVxuXG5pZiAoZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4odGxzRGlyLCBjaGFpbikpKSB7XG4gIG9wdGlvbnMuY2VydCA9IGZzLnJlYWRGaWxlU3luYyhwYXRoLmpvaW4odGxzRGlyLCBjaGFpbikpO1xufVxuXG4vLyBTdGFydCBzZXJ2ZXJcbnNwZHkuY3JlYXRlU2VydmVyKG9wdGlvbnMsIGFwcCBhcyBhbnkpLmxpc3RlbihQT1JULCAoZXJyOiBhbnkpID0+IHtcbiAgaWYgKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoQ2hhbGsuYmdSZWQoZXJyKSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIENoYWxrLmJsYWNrLmJnR3JlZW4oXG4gICAgICAgIGBcXG5cXG7toL3tsJkgIExpc3RlbmluZyBhdCBodHRwJHshb3B0aW9ucy5zcGR5IS5wbGFpbiA/IFwic1wiIDogXCJcIn06Ly86JHtQT1JUfVxcbmBcbiAgICAgIClcbiAgICApO1xuICB9XG59KTtcblxucHJvY2Vzcy5vbihcIlNJR0lOVFwiLCAoKSA9PiB7XG4gIGNvbnNvbGUuaW5mbyhcIkNhcHR1cmVkIFNJR0lOVCEgRXhpdGluZy5cIik7XG4gIHByb2Nlc3MuZXhpdCgpO1xufSk7XG5cbnByb2Nlc3Mub24oXCJTSUdURVJNXCIsICgpID0+IHtcbiAgY29uc29sZS5pbmZvKFwiQ2FwdHVyZWQgU0lHVEVSTS4gRXhpdGluZy5cIik7XG4gIHByb2Nlc3MuZXhpdCgpO1xufSk7XG4iXX0=